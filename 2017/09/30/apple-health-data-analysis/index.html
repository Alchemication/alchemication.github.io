<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Apple Health Data Analysis | Preprocessed</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Are you more active on trips?">
<meta name="keywords" content="Python,Data Analysis,Jupyter Notebook,Xml,Apple Health,Plotly">
<meta property="og:type" content="article">
<meta property="og:title" content="Apple Health Data Analysis">
<meta property="og:url" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/index.html">
<meta property="og:site_name" content="Preprocessed">
<meta property="og:description" content="Are you more active on trips?">
<meta property="og:image" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/images/img1.jpg">
<meta property="og:image" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/images/img2.jpg">
<meta property="og:image" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/images/img3.jpg">
<meta property="og:image" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/images/img4.jpg">
<meta property="og:updated_time" content="2017-10-08T18:26:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Apple Health Data Analysis">
<meta name="twitter:description" content="Are you more active on trips?">
<meta name="twitter:image" content="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/images/img1.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Preprocessed" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/preprocessed/css/style.css">
  

    <style>
      iframe {
          display: block;       /* iframes are inline by default */
          background: #FDFDFD;
          border: none;         /* Reset default border */
          /* height: 100vh;        /* Viewport-relative units */
          /*width: 58vw; */
      }

      .notebook-outset {
        padding: 5px; 
        border: 2px dashed #C2A0A0;
      }
    </style>
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/preprocessed/" id="logo">Preprocessed</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/preprocessed/" id="subtitle">Purely Data Driven Blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/preprocessed/">Home</a>
        
          <a class="main-nav-link" href="/preprocessed/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://alchemication.github.io/preprocessed"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-apple-health-data-analysis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/preprocessed/2017/09/30/apple-health-data-analysis/" class="article-date">
  <time datetime="2017-09-30T13:25:50.000Z" itemprop="datePublished">2017-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Apple Health Data Analysis
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Are-you-more-active-on-trips"><a href="#Are-you-more-active-on-trips" class="headerlink" title="Are you more active on trips?"></a>Are you more active on trips?</h3><a id="more"></a> 
<h4 id="1-Motivation"><a href="#1-Motivation" class="headerlink" title="1. Motivation"></a>1. Motivation</h4><p>This idea came in to my head out of nowhere long time ago and I started wondering if there is any data available on this matter. It turns out that Apple allows you to export your Health data from your iPhone in an xml format (yayx!)</p>
<p>It looks like IOS keeps track of all our walks and runs and records it every N seconds as a timestamp and kilometers. </p>
<p>But hey. What about the trip data? How can we collect it and where from? Scroll down to see what can be done about that ;-)</p>
<p>Here’s what we’ll do in this post:</p>
<ul>
<li><a href="#link21">collect Apple Health data from an iPhone</a></li>
<li><a href="#link22">load the Health data into Jupyter Notebook and analyse it</a></li>
<li><a href="#link23">collect trip dates</a></li>
<li><a href="#link24">overlay trip dates on top of the Apple Health data</a></li>
</ul>
<p>Sounds interesting? I know!</p>
<h4 id="2-Let’s-get-our-hands-dirty"><a href="#2-Let’s-get-our-hands-dirty" class="headerlink" title="2. Let’s get our hands dirty!"></a>2. Let’s get our hands dirty!</h4><p><a name="link21"></a></p>
<h5 id="2-1-Collect-Apple-Health-data-from-an-iPhone"><a href="#2-1-Collect-Apple-Health-data-from-an-iPhone" class="headerlink" title="2.1 Collect Apple Health data from an iPhone"></a>2.1 Collect Apple Health data from an iPhone</h5><p></p>
<p>Thanks to a great <a href="http://www.idownloadblog.com/2015/06/10/how-to-export-import-health-data" target="_blank" rel="external">article</a> from 2015 by Sebastien Page - I knew that this is possible, however in the new IOS (11.x as of this article) - the method is slightly different and from the Health App you must click on the user icon in the top right corner (image 1 below) of the display and click on the Export Health Data link (image 2 below). This will send you a zipped xml file into your mailbox. Don’t worry, it’s not huge (~2.5MB for my 3 years of data):</p>

<div class="row" style="width: 100%;">
    <div class="pull-left col-sm-3" style="float: left; width: 30%;">
        <div style="padding: 10px; border: 1px solid #EEE;">
            <img src="images/img1.jpg" alt="Step 1">
        </div>
    </div>
    <div class="pull-left col-sm-3" style="float: left; width: 30%; margin-left: 20px;">
        <div style="padding: 10px; border: 1px solid #EEE;">
            <img src="images/img2.jpg" alt="Step 2">
        </div>
    </div>
    <div class="clearfix" style="clear: both;">
    </div>
</div>

<p>If you don’t have an iPhone, hmmm… there is something for Android too (S-Health?), but it looks a bit complicated as of September 2017. Feel free to follow along though, just for fun!</p>
<p><strong>Warning:</strong><br>You probably need to enable GPS and Location services on your phone for this to work.</p>
<p><a name="link22"></a></p>
<h5 id="2-2-Load-and-analyse-health-data-in-the-Jupyter-Notebook"><a href="#2-2-Load-and-analyse-health-data-in-the-Jupyter-Notebook" class="headerlink" title="2.2 Load and analyse health data in the Jupyter Notebook"></a>2.2 Load and analyse health data in the Jupyter Notebook</h5><p></p>
<p>Here is the Notebook:</p>

    <div class="notebook-outset">
        <iframe src="notebooks/My+Apple+Health+Data+Analysis.html" width="100%" height="600" frameborder="0"></iframe>
    </div>

<p>So, we can now see the weekly (and yearly) characteristics of our activities recorded on an iPhone. Cool! But it’s time to take it to the next level.</p>
<p><a name="link23"></a></p>
<h5 id="2-3-Collect-trip-dates"><a href="#2-3-Collect-trip-dates" class="headerlink" title="2.3 Collect trip dates"></a>2.3 Collect trip dates</h5><p></p>
<p>This may sound like a daunting task and it kind of is (as often data collection is).</p>
<p>One of the ways to do that is to search for an occurance of “Itinerary” word inside your mail client. And that is exactly what I did here:</p>
<img src="/preprocessed/2017/09/30/apple-health-data-analysis/images/img3.jpg" alt="Gmail search" title="Gmail search">
<p>Just in case you are wondering, I actually don’t mind you seeing that I’m travelling to Zanzibar in November 2017 cause I’m simpy super excited about that trip ;-)</p>
<p>The main question is though: what now?</p>
<p>Well, with a bit of copy &amp; paste, BBC magic, manual inspection and Python reg-ex code we can turn the gmail Itinerary data into useful information. Here is the Notebook:</p>

    <div class="notebook-outset">
        <iframe src="notebooks/Trip+Data+Analysis.html" width="100%" height="600" frameborder="0"></iframe>
    </div>

<p>So now that we have both data elements collected and stored as clean csv files - let’s compare them.</p>
<p><a name="link24"></a></p>
<h5 id="2-4-Overlay-Itinerary-dates-on-top-of-the-step-counter"><a href="#2-4-Overlay-Itinerary-dates-on-top-of-the-step-counter" class="headerlink" title="2.4 Overlay Itinerary dates on top of the step counter"></a>2.4 Overlay Itinerary dates on top of the step counter</h5><p></p>
<p>This will be the final Notebook in this post. It will be interesting to see if there are clear patterns in the data showing more or less activity over the time away.</p>

    <div class="notebook-outset">
        <iframe src="notebooks/Trip+Vs+Non-Trip+Activity+Comparison.html" width="100%" height="600" frameborder="0"></iframe>
    </div>

<h4 id="3-Conclusions"><a href="#3-Conclusions" class="headerlink" title="3. Conclusions"></a>3. Conclusions</h4><p>And so we have reached here. It turns out that the difference in the activity patterns while at home an away (no pun intented) is rather minor. It looks like, while away, I tend to walk/run more by <strong>~500 meters</strong> per day on average.</p>
<p>I guess one interesting finding is around the fact that I am quite active while away (not only laying on the beach with a bubbly Aperol Spritz on the side, but also walking and running quite a bit).</p>
<p>If we take a look at the last plotly visualisation and zoom in on a random trip period - we can see that the y axis (kilometers) is actually quite high while being on the trips (indicated by the blue cross markers):</p>
<img src="/preprocessed/2017/09/30/apple-health-data-analysis/images/img4.jpg" alt="Trip vs Non-trip Vis" title="Trip vs Non-trip Vis">
<p>But there is definitely a catch here. I can not guarantee that the Apple measurements are perfectly correct. Also while at home - I play basketball, excercise at the gym and do TRX classes quite regularly, which is not measured in here. On the contrary - while away - I usually excercise (swim or gym) as well.</p>
<p>So it is a nice excercise where you can learn a lot about your lifestyle, but drawing black and white conclusions is just a bit naive.</p>
<p>I am actually planning to buy an Apple Watch in some time, which will record data more often (even while swimming and playing basket) and it will give me a chance to take a look at other interesting measurements like the pulse for example.</p>
<p>Another thing to add is the way I came to the conclusion that the difference between the trip and non-trip time series was rather minor was not very scientific. There are papers about more scientific approaches, which I am planning to explore and who knows - maybe I can update this post at some time with more “statistically exhaustive” conclusions.</p>
<p>And last but not least - every time I hop off on the cycling machine at the gym - I take a photo with the final results from the screen (time, distance and the pulse). Using a few computer vision tricks I could extract that data as well and somehow merge it into the existing Apple Health data. I’m just too lazy to do that at this stage as I have more cool ideas for another posts ;-)</p>
<p>So, I hope it was somewhat enjoyable and please leave a comment below if you have any thoughts or ideas to improve this experiment (comment section is WIP, sorry ;).</p>
<p>Peace and see you next time!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/" data-id="cj8kiz21w00001nr6gw6q5z0o" class="article-share-link">Share</a>
      
        <a href="https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Apple-Health/">Apple Health</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Data-Analysis/">Data Analysis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Jupyter-Notebook/">Jupyter Notebook</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Plotly/">Plotly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/preprocessed/tags/Xml/">Xml</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Apple-Health/">Apple Health</a></li><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Data-Analysis/">Data Analysis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Jupyter-Notebook/">Jupyter Notebook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Plotly/">Plotly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/preprocessed/tags/Xml/">Xml</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/preprocessed/tags/Apple-Health/" style="font-size: 10px;">Apple Health</a> <a href="/preprocessed/tags/Data-Analysis/" style="font-size: 10px;">Data Analysis</a> <a href="/preprocessed/tags/Jupyter-Notebook/" style="font-size: 10px;">Jupyter Notebook</a> <a href="/preprocessed/tags/Plotly/" style="font-size: 10px;">Plotly</a> <a href="/preprocessed/tags/Python/" style="font-size: 10px;">Python</a> <a href="/preprocessed/tags/Xml/" style="font-size: 10px;">Xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/preprocessed/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/preprocessed/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          
        
          
        
          
        
          
          <li>
            <a href="/preprocessed/2017/09/30/apple-health-data-analysis/">Apple Health Data Analysis</a>
          </li>
          
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Adam Napora<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>

  
    <script>
      var disqus_shortname = 'alchemication';
      
      var disqus_url = 'https://alchemication.github.io/preprocessed/2017/10/09/apple-health-data-analysis/notebooks/Trip+Vs+Non-Trip+Activity+Comparison/';
      
      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/preprocessed/" class="mobile-nav-link">Home</a>
  
    <a href="/preprocessed/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'alchemication';
  
  var disqus_url = 'https://alchemication.github.io/preprocessed/2017/09/30/apple-health-data-analysis/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/preprocessed/fancybox/jquery.fancybox.css">
  <script src="/preprocessed/fancybox/jquery.fancybox.pack.js"></script>


<script src="/preprocessed/js/script.js"></script>

  </div>

  <script>
    var curTextWords = $('#subtitle').text().split(' ');
    var options = ['Totally', 'Purely', 'Deeply', 'Extremely', 'Awfully', 'Immensely', 
      'Utterly', 'Remarkably', 'Entirely', 'Wholeheartedly'];
    curTextWords[0] = options[Math.floor(Math.random() * options.length)];
    $('#subtitle').text(curTextWords.join(' '));
  </script>

</body>
</html>